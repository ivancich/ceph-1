From: Matt Benjamin <mbenjamin@redhat.com>
Date: Wed, 17 Aug 2016 10:28:48 -0400
Subject: rgw_file: restore local definition of RGWLibFS gc interval

Signed-off-by: Matt Benjamin <mbenjamin@redhat.com>
(cherry picked from commit 31936caa09b46e86700faad969adfa9d43176206)

Fixes: http://tracker.ceph.com/issues/17323
Resolves: rhbz#1381698
---
 src/rgw/rgw_file.cc | 2 +-
 src/rgw/rgw_file.h  | 3 ---
 2 files changed, 1 insertion(+), 4 deletions(-)

diff --git a/src/rgw/rgw_file.cc b/src/rgw/rgw_file.cc
index 2741d83..1f5b35d 100644
--- a/src/rgw/rgw_file.cc
+++ b/src/rgw/rgw_file.cc
@@ -684,7 +684,7 @@ namespace rgw {
 	  } /* rgw_fh */
 	} /* event::type::READDIR */
       } /* ev */
-      std::this_thread::sleep_for(gc_interval);
+      std::this_thread::sleep_for(std::chrono::seconds(120));
     } while (! stop);
   } /* RGWLibFS::gc */
 
diff --git a/src/rgw/rgw_file.h b/src/rgw/rgw_file.h
index 40853b0..0998fa3 100644
--- a/src/rgw/rgw_file.h
+++ b/src/rgw/rgw_file.h
@@ -698,9 +698,6 @@ namespace rgw {
     struct rgw_fs fs;
     RGWFileHandle root_fh;
 
-    static constexpr std::chrono::seconds gc_interval =
-      std::chrono::seconds(120);
-
     mutable std::atomic<uint64_t> refcnt;
 
     RGWFileHandle::FHCache fh_cache;
